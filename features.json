{
  "features": [
    {
      "id": "SETUP-001",
      "category": "setup",
      "description": "Create pyproject.toml with dependencies",
      "steps": [
        "Create pyproject.toml with project metadata",
        "Define Python 3.11+ requirement",
        "Add all dependencies (typer, pydantic, pyautogui, playwright, pillow, mss, pytesseract, opencv-python)",
        "Configure package as 'programmatic_demo' with src layout",
        "Add [project.scripts] entry for pdemo CLI"
      ],
      "files": ["pyproject.toml"],
      "depends_on": [],
      "passes": false
    },
    {
      "id": "SETUP-002",
      "category": "setup",
      "description": "Create package __init__.py",
      "steps": [
        "Create src/programmatic_demo/__init__.py",
        "Add __version__ = '0.1.0'",
        "Add module docstring"
      ],
      "files": ["src/programmatic_demo/__init__.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },
    {
      "id": "SETUP-003",
      "category": "setup",
      "description": "Create package __main__.py",
      "steps": [
        "Create src/programmatic_demo/__main__.py",
        "Import and call cli main function",
        "Enable python -m programmatic_demo invocation"
      ],
      "files": ["src/programmatic_demo/__main__.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },
    {
      "id": "SETUP-004",
      "category": "setup",
      "description": "Create macOS setup script",
      "steps": [
        "Create scripts/setup_macos.sh",
        "Add brew install commands for ffmpeg, tesseract, tmux",
        "Add ghostty cask install",
        "Add yabai install",
        "Add Python venv creation and pip install",
        "Make script executable"
      ],
      "files": ["scripts/setup_macos.sh"],
      "depends_on": [],
      "passes": false
    },
    {
      "id": "SETUP-005",
      "category": "setup",
      "description": "Create dependency verification script",
      "steps": [
        "Create scripts/verify_dependencies.py",
        "Check Python version >= 3.11",
        "Check system commands exist (ffmpeg, tesseract, tmux)",
        "Check Python packages importable",
        "Print pass/fail for each, exit 1 if any fail"
      ],
      "files": ["scripts/verify_dependencies.py"],
      "depends_on": [],
      "passes": false
    },

    {
      "id": "UTIL-001",
      "category": "utility",
      "description": "Create utils/output.py JSON formatter",
      "steps": [
        "Create src/programmatic_demo/utils/__init__.py",
        "Create src/programmatic_demo/utils/output.py",
        "Add success_response(action, result) function",
        "Add error_response(error_type, message, recoverable, suggestion) function",
        "Both return dict with timestamp, can be json.dumps'd"
      ],
      "files": ["src/programmatic_demo/utils/__init__.py", "src/programmatic_demo/utils/output.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },
    {
      "id": "UTIL-002",
      "category": "utility",
      "description": "Create utils/timing.py delay functions",
      "steps": [
        "Create src/programmatic_demo/utils/timing.py",
        "Add random_delay(min_ms, max_ms) - sleeps random duration",
        "Add typing_delay(base_ms=50) - returns jittered delay for typing",
        "Add hover_pause() - returns 50-150ms delay"
      ],
      "files": ["src/programmatic_demo/utils/timing.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },
    {
      "id": "UTIL-003",
      "category": "utility",
      "description": "Create utils/config.py settings loader",
      "steps": [
        "Create src/programmatic_demo/utils/config.py",
        "Add Config dataclass with default values",
        "Add load_config() that reads ~/.pdemo/config.json if exists",
        "Support PDEMO_ environment variable overrides"
      ],
      "files": ["src/programmatic_demo/utils/config.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },

    {
      "id": "CLI-001",
      "category": "cli",
      "description": "Create CLI main app skeleton",
      "steps": [
        "Create src/programmatic_demo/cli/__init__.py",
        "Create src/programmatic_demo/cli/main.py",
        "Create typer app with --version and --json flags",
        "Add placeholder subcommand groups (record, terminal, keyboard, mouse, browser, observe)"
      ],
      "files": ["src/programmatic_demo/cli/__init__.py", "src/programmatic_demo/cli/main.py"],
      "depends_on": ["SETUP-002", "UTIL-001"],
      "passes": false
    },

    {
      "id": "REC-SKEL",
      "category": "recording",
      "description": "Create recorder.py skeleton with Recorder class",
      "steps": [
        "Create src/programmatic_demo/recording/__init__.py",
        "Create src/programmatic_demo/recording/recorder.py",
        "Add Recorder class with method stubs: start(), stop(), get_status()",
        "Add instance variables: _process, _output_path, _start_time"
      ],
      "files": ["src/programmatic_demo/recording/__init__.py", "src/programmatic_demo/recording/recorder.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },
    {
      "id": "REC-001",
      "category": "recording",
      "description": "Implement Recorder.start() method",
      "steps": [
        "Implement start(output_path, fps=60) in recorder.py",
        "Build ffmpeg command with AVFoundation capture",
        "Launch as subprocess, store PID",
        "Store start_time for duration tracking",
        "Return success dict with pid and output_path"
      ],
      "files": ["src/programmatic_demo/recording/recorder.py"],
      "depends_on": ["REC-SKEL"],
      "passes": false
    },
    {
      "id": "REC-002",
      "category": "recording",
      "description": "Implement Recorder.stop() method",
      "steps": [
        "Implement stop() in recorder.py",
        "Send SIGINT to ffmpeg process",
        "Wait for process to terminate (timeout 10s)",
        "Calculate duration from start_time",
        "Return success dict with file_path, duration"
      ],
      "files": ["src/programmatic_demo/recording/recorder.py"],
      "depends_on": ["REC-SKEL"],
      "passes": false
    },
    {
      "id": "REC-003",
      "category": "recording",
      "description": "Implement Recorder.get_status() method",
      "steps": [
        "Implement get_status() in recorder.py",
        "Check if process is running",
        "Return dict with active, duration, output_path, pid"
      ],
      "files": ["src/programmatic_demo/recording/recorder.py"],
      "depends_on": ["REC-SKEL"],
      "passes": false
    },
    {
      "id": "REC-CLI",
      "category": "recording",
      "description": "Create CLI record subcommands",
      "steps": [
        "Create src/programmatic_demo/cli/recording.py",
        "Add typer app with start, stop, status commands",
        "Wire to Recorder singleton instance",
        "Output JSON responses",
        "Register in main.py"
      ],
      "files": ["src/programmatic_demo/cli/recording.py"],
      "depends_on": ["CLI-001", "REC-001", "REC-002", "REC-003"],
      "passes": false
    },

    {
      "id": "TERM-SKEL",
      "category": "terminal",
      "description": "Create terminal.py skeleton with Terminal class",
      "steps": [
        "Create src/programmatic_demo/actuators/__init__.py",
        "Create src/programmatic_demo/actuators/terminal.py",
        "Add Terminal class with stubs: launch(), send(), exec(), read(), wait_for(), clear()",
        "Add instance variable: _session_name"
      ],
      "files": ["src/programmatic_demo/actuators/__init__.py", "src/programmatic_demo/actuators/terminal.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },
    {
      "id": "TERM-001",
      "category": "terminal",
      "description": "Implement Terminal.launch() method",
      "steps": [
        "Implement launch(name=None) in terminal.py",
        "Generate session name if not provided: pdemo-{timestamp}",
        "Run tmux new-session -d -s {name}",
        "Verify session created with tmux has-session",
        "Store session name, return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/terminal.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "TERM-002",
      "category": "terminal",
      "description": "Implement Terminal.send() method",
      "steps": [
        "Implement send(text) in terminal.py",
        "Use tmux send-keys -t {session} {text}",
        "Do NOT send Enter key",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/terminal.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "TERM-003",
      "category": "terminal",
      "description": "Implement Terminal.exec() method",
      "steps": [
        "Implement exec(command, timeout=120) in terminal.py",
        "Send command + Enter key",
        "Poll read() until shell prompt returns or timeout",
        "Return success dict with output"
      ],
      "files": ["src/programmatic_demo/actuators/terminal.py"],
      "depends_on": ["TERM-SKEL", "TERM-004"],
      "passes": false
    },
    {
      "id": "TERM-004",
      "category": "terminal",
      "description": "Implement Terminal.read() method",
      "steps": [
        "Implement read(lines=50) in terminal.py",
        "Use tmux capture-pane -t {session} -p",
        "Strip ANSI escape codes with regex",
        "Return last N lines as string"
      ],
      "files": ["src/programmatic_demo/actuators/terminal.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "TERM-005",
      "category": "terminal",
      "description": "Implement Terminal.wait_for() method",
      "steps": [
        "Implement wait_for(text, timeout=30) in terminal.py",
        "Poll read() every 0.5s",
        "Return success when text found in output",
        "Return error dict on timeout"
      ],
      "files": ["src/programmatic_demo/actuators/terminal.py"],
      "depends_on": ["TERM-SKEL", "TERM-004"],
      "passes": false
    },
    {
      "id": "TERM-006",
      "category": "terminal",
      "description": "Implement Terminal.clear() method",
      "steps": [
        "Implement clear() in terminal.py",
        "Send clear command or Ctrl+L via tmux",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/terminal.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "TERM-CLI",
      "category": "terminal",
      "description": "Create CLI terminal subcommands",
      "steps": [
        "Create src/programmatic_demo/cli/terminal.py",
        "Add typer app with launch, send, exec, read, wait-for, clear commands",
        "Wire to Terminal singleton",
        "Output JSON responses",
        "Register in main.py"
      ],
      "files": ["src/programmatic_demo/cli/terminal.py"],
      "depends_on": ["CLI-001", "TERM-001", "TERM-002", "TERM-003", "TERM-004", "TERM-005", "TERM-006"],
      "passes": false
    },

    {
      "id": "KEY-SKEL",
      "category": "keyboard",
      "description": "Create keyboard.py skeleton with Keyboard class",
      "steps": [
        "Create src/programmatic_demo/actuators/keyboard.py",
        "Add Keyboard class with stubs: type_text(), press(), hotkey()",
        "Import pyautogui"
      ],
      "files": ["src/programmatic_demo/actuators/keyboard.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "KEY-001",
      "category": "keyboard",
      "description": "Implement Keyboard.type_text() method",
      "steps": [
        "Implement type_text(text, delay_ms=50) in keyboard.py",
        "Loop through characters",
        "Use pyautogui.write() or press() for each char",
        "Add jittered delay between chars (Â±30%)",
        "Return success dict with text and duration"
      ],
      "files": ["src/programmatic_demo/actuators/keyboard.py"],
      "depends_on": ["KEY-SKEL", "UTIL-002"],
      "passes": false
    },
    {
      "id": "KEY-002",
      "category": "keyboard",
      "description": "Implement Keyboard.press() method",
      "steps": [
        "Implement press(key) in keyboard.py",
        "Map key names to pyautogui keys (enter, tab, escape, arrows, f1-f12)",
        "Use pyautogui.press()",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/keyboard.py"],
      "depends_on": ["KEY-SKEL"],
      "passes": false
    },
    {
      "id": "KEY-003",
      "category": "keyboard",
      "description": "Implement Keyboard.hotkey() method",
      "steps": [
        "Implement hotkey(keys_str) in keyboard.py",
        "Parse 'cmd+shift+p' format",
        "Map cmd/ctrl/alt/shift to pyautogui modifiers",
        "Use pyautogui.hotkey()",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/keyboard.py"],
      "depends_on": ["KEY-SKEL"],
      "passes": false
    },
    {
      "id": "KEY-CLI",
      "category": "keyboard",
      "description": "Create CLI keyboard subcommands",
      "steps": [
        "Create src/programmatic_demo/cli/keyboard.py",
        "Add typer app with type, press, hotkey commands",
        "Wire to Keyboard instance",
        "Output JSON responses",
        "Register in main.py"
      ],
      "files": ["src/programmatic_demo/cli/keyboard.py"],
      "depends_on": ["CLI-001", "KEY-001", "KEY-002", "KEY-003"],
      "passes": false
    },

    {
      "id": "MOUSE-SKEL",
      "category": "mouse",
      "description": "Create mouse.py skeleton with Mouse class",
      "steps": [
        "Create src/programmatic_demo/actuators/mouse.py",
        "Add Mouse class with stubs: move_to(), click(), click_at(), scroll(), drag()",
        "Import pyautogui"
      ],
      "files": ["src/programmatic_demo/actuators/mouse.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "MOUSE-001",
      "category": "mouse",
      "description": "Implement Mouse.move_to() with bezier curve",
      "steps": [
        "Implement move_to(x, y, duration=0.5) in mouse.py",
        "Get current position",
        "Generate bezier curve control points",
        "Interpolate points along curve",
        "Move through points with small delays",
        "Add slight random jitter to path"
      ],
      "files": ["src/programmatic_demo/actuators/mouse.py"],
      "depends_on": ["MOUSE-SKEL"],
      "passes": false
    },
    {
      "id": "MOUSE-002",
      "category": "mouse",
      "description": "Implement Mouse.click() method",
      "steps": [
        "Implement click(button='left', clicks=1) in mouse.py",
        "Add hover_pause() delay before click",
        "Use pyautogui.click()",
        "Return success dict with position"
      ],
      "files": ["src/programmatic_demo/actuators/mouse.py"],
      "depends_on": ["MOUSE-SKEL", "UTIL-002"],
      "passes": false
    },
    {
      "id": "MOUSE-003",
      "category": "mouse",
      "description": "Implement Mouse.click_at() method",
      "steps": [
        "Implement click_at(x, y, button='left') in mouse.py",
        "Call move_to(x, y)",
        "Call click(button)",
        "Return success dict with position"
      ],
      "files": ["src/programmatic_demo/actuators/mouse.py"],
      "depends_on": ["MOUSE-001", "MOUSE-002"],
      "passes": false
    },
    {
      "id": "MOUSE-004",
      "category": "mouse",
      "description": "Implement Mouse.scroll() method",
      "steps": [
        "Implement scroll(direction, amount) in mouse.py",
        "Map direction to scroll delta",
        "Use pyautogui.scroll() in loop with small delays",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/mouse.py"],
      "depends_on": ["MOUSE-SKEL"],
      "passes": false
    },
    {
      "id": "MOUSE-005",
      "category": "mouse",
      "description": "Implement Mouse.drag() method",
      "steps": [
        "Implement drag(from_x, from_y, to_x, to_y, duration=0.5) in mouse.py",
        "Move to start position",
        "Press mouse button down",
        "Move to end position with bezier",
        "Release mouse button",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/mouse.py"],
      "depends_on": ["MOUSE-001"],
      "passes": false
    },
    {
      "id": "MOUSE-CLI",
      "category": "mouse",
      "description": "Create CLI mouse subcommands",
      "steps": [
        "Create src/programmatic_demo/cli/mouse.py",
        "Add typer app with move, click, scroll, drag commands",
        "Wire to Mouse instance",
        "Output JSON responses",
        "Register in main.py"
      ],
      "files": ["src/programmatic_demo/cli/mouse.py"],
      "depends_on": ["CLI-001", "MOUSE-001", "MOUSE-002", "MOUSE-003", "MOUSE-004", "MOUSE-005"],
      "passes": false
    },

    {
      "id": "SCREEN-SKEL",
      "category": "perception",
      "description": "Create screen.py skeleton with Screen class",
      "steps": [
        "Create src/programmatic_demo/sensors/__init__.py",
        "Create src/programmatic_demo/sensors/screen.py",
        "Add Screen class with stubs: capture(), capture_region(), save(), to_base64()",
        "Import mss, PIL"
      ],
      "files": ["src/programmatic_demo/sensors/__init__.py", "src/programmatic_demo/sensors/screen.py"],
      "depends_on": ["SETUP-001"],
      "passes": false
    },
    {
      "id": "SCREEN-001",
      "category": "perception",
      "description": "Implement Screen.capture() full screen",
      "steps": [
        "Implement capture() in screen.py",
        "Use mss to capture primary monitor",
        "Convert to PIL Image",
        "Handle Retina scaling (divide dimensions by 2 if needed)",
        "Return PIL Image"
      ],
      "files": ["src/programmatic_demo/sensors/screen.py"],
      "depends_on": ["SCREEN-SKEL"],
      "passes": false
    },
    {
      "id": "SCREEN-002",
      "category": "perception",
      "description": "Implement Screen.capture_region() method",
      "steps": [
        "Implement capture_region(x, y, width, height) in screen.py",
        "Use mss with monitor dict for region",
        "Convert to PIL Image",
        "Return cropped image"
      ],
      "files": ["src/programmatic_demo/sensors/screen.py"],
      "depends_on": ["SCREEN-SKEL"],
      "passes": false
    },
    {
      "id": "SCREEN-003",
      "category": "perception",
      "description": "Implement Screen.save() method",
      "steps": [
        "Implement save(image, path) in screen.py",
        "Create parent directories if needed",
        "Save as PNG or JPG based on extension",
        "Return dict with path and file size"
      ],
      "files": ["src/programmatic_demo/sensors/screen.py"],
      "depends_on": ["SCREEN-SKEL"],
      "passes": false
    },
    {
      "id": "SCREEN-004",
      "category": "perception",
      "description": "Implement Screen.to_base64() method",
      "steps": [
        "Implement to_base64(image) in screen.py",
        "Save image to BytesIO as PNG",
        "Encode to base64 string",
        "Return base64 string"
      ],
      "files": ["src/programmatic_demo/sensors/screen.py"],
      "depends_on": ["SCREEN-SKEL"],
      "passes": false
    },

    {
      "id": "OCR-SKEL",
      "category": "perception",
      "description": "Create ocr.py skeleton with OCR class",
      "steps": [
        "Create src/programmatic_demo/sensors/ocr.py",
        "Add OCR class with stubs: extract_text(), extract_elements(), find_text()",
        "Import pytesseract"
      ],
      "files": ["src/programmatic_demo/sensors/ocr.py"],
      "depends_on": ["SCREEN-SKEL"],
      "passes": false
    },
    {
      "id": "OCR-001",
      "category": "perception",
      "description": "Implement OCR.extract_text() method",
      "steps": [
        "Implement extract_text(image) in ocr.py",
        "Use pytesseract.image_to_string()",
        "Return extracted text as string"
      ],
      "files": ["src/programmatic_demo/sensors/ocr.py"],
      "depends_on": ["OCR-SKEL"],
      "passes": false
    },
    {
      "id": "OCR-002",
      "category": "perception",
      "description": "Implement OCR.extract_elements() with bounding boxes",
      "steps": [
        "Implement extract_elements(image) in ocr.py",
        "Use pytesseract.image_to_data()",
        "Parse output into list of {text, x, y, width, height, confidence}",
        "Filter low confidence (<50) results",
        "Sort top-to-bottom, left-to-right"
      ],
      "files": ["src/programmatic_demo/sensors/ocr.py"],
      "depends_on": ["OCR-SKEL"],
      "passes": false
    },
    {
      "id": "OCR-003",
      "category": "perception",
      "description": "Implement OCR.find_text() method",
      "steps": [
        "Implement find_text(image, text, partial=False) in ocr.py",
        "Call extract_elements()",
        "Search for matching text (exact or partial)",
        "Return center coordinates {x, y} or None"
      ],
      "files": ["src/programmatic_demo/sensors/ocr.py"],
      "depends_on": ["OCR-002"],
      "passes": false
    },

    {
      "id": "STATE-SKEL",
      "category": "perception",
      "description": "Create state.py skeleton with Observer class",
      "steps": [
        "Create src/programmatic_demo/sensors/state.py",
        "Add Observer class with stubs: get_observation(), get_window_info()",
        "Add references to Screen, OCR, Terminal instances"
      ],
      "files": ["src/programmatic_demo/sensors/state.py"],
      "depends_on": ["SCREEN-SKEL", "OCR-SKEL"],
      "passes": false
    },
    {
      "id": "STATE-001",
      "category": "perception",
      "description": "Implement Observer.get_window_info() method",
      "steps": [
        "Implement get_window_info() in state.py",
        "Use subprocess to call yabai -m query --windows --window",
        "Parse JSON response",
        "Return {title, app, bounds: {x, y, width, height}}"
      ],
      "files": ["src/programmatic_demo/sensors/state.py"],
      "depends_on": ["STATE-SKEL"],
      "passes": false
    },
    {
      "id": "STATE-002",
      "category": "perception",
      "description": "Implement Observer.get_observation() full observation",
      "steps": [
        "Implement get_observation() in state.py",
        "Capture screenshot, save to temp file",
        "Get base64 of screenshot",
        "Extract OCR text",
        "Get terminal output if session active",
        "Get window info",
        "Return full observation dict with timestamp"
      ],
      "files": ["src/programmatic_demo/sensors/state.py"],
      "depends_on": ["STATE-001", "SCREEN-001", "SCREEN-003", "SCREEN-004", "OCR-001"],
      "passes": false
    },
    {
      "id": "STATE-CLI",
      "category": "perception",
      "description": "Create CLI observe subcommands",
      "steps": [
        "Create src/programmatic_demo/cli/perception.py",
        "Add typer app with screenshot, ocr, window, full commands",
        "Wire to Observer instance",
        "Output JSON responses",
        "Register in main.py"
      ],
      "files": ["src/programmatic_demo/cli/perception.py"],
      "depends_on": ["CLI-001", "STATE-002"],
      "passes": false
    },

    {
      "id": "WINDOW-SKEL",
      "category": "window",
      "description": "Create window.py skeleton with Window class",
      "steps": [
        "Create src/programmatic_demo/actuators/window.py",
        "Add Window class with stubs: get_windows(), focus()",
        "Will use yabai for implementation"
      ],
      "files": ["src/programmatic_demo/actuators/window.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "WINDOW-001",
      "category": "window",
      "description": "Implement Window.get_windows() method",
      "steps": [
        "Implement get_windows() in window.py",
        "Run yabai -m query --windows",
        "Parse JSON response",
        "Return list of {id, title, app, bounds}"
      ],
      "files": ["src/programmatic_demo/actuators/window.py"],
      "depends_on": ["WINDOW-SKEL"],
      "passes": false
    },
    {
      "id": "WINDOW-002",
      "category": "window",
      "description": "Implement Window.focus() method",
      "steps": [
        "Implement focus(app_or_title) in window.py",
        "Call get_windows() to find matching window",
        "Run yabai -m window --focus {id}",
        "Return window info dict"
      ],
      "files": ["src/programmatic_demo/actuators/window.py"],
      "depends_on": ["WINDOW-001"],
      "passes": false
    },

    {
      "id": "BROWSER-SKEL",
      "category": "browser",
      "description": "Create browser.py skeleton with Browser class",
      "steps": [
        "Create src/programmatic_demo/actuators/browser.py",
        "Add Browser class with stubs: launch(), navigate(), click(), fill(), wait_for(), get_state(), screenshot(), close()",
        "Import playwright.sync_api"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["TERM-SKEL"],
      "passes": false
    },
    {
      "id": "BROWSER-001",
      "category": "browser",
      "description": "Implement Browser.launch() method",
      "steps": [
        "Implement launch(url=None) in browser.py",
        "Create Playwright instance",
        "Launch chromium with headless=False",
        "Create new page",
        "Navigate to url if provided",
        "Store browser, context, page references"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-SKEL"],
      "passes": false
    },
    {
      "id": "BROWSER-002",
      "category": "browser",
      "description": "Implement Browser.navigate() method",
      "steps": [
        "Implement navigate(url) in browser.py",
        "Use page.goto(url)",
        "Wait for load state",
        "Return {url, title}"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-001"],
      "passes": false
    },
    {
      "id": "BROWSER-003",
      "category": "browser",
      "description": "Implement Browser.click() method",
      "steps": [
        "Implement click(selector) in browser.py",
        "Use page.click(selector)",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-001"],
      "passes": false
    },
    {
      "id": "BROWSER-004",
      "category": "browser",
      "description": "Implement Browser.fill() method",
      "steps": [
        "Implement fill(selector, value) in browser.py",
        "Use page.fill(selector, value)",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-001"],
      "passes": false
    },
    {
      "id": "BROWSER-005",
      "category": "browser",
      "description": "Implement Browser.wait_for() method",
      "steps": [
        "Implement wait_for(selector, timeout=10) in browser.py",
        "Use page.wait_for_selector(selector, timeout=timeout*1000)",
        "Return success or timeout error"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-001"],
      "passes": false
    },
    {
      "id": "BROWSER-006",
      "category": "browser",
      "description": "Implement Browser.get_state() method",
      "steps": [
        "Implement get_state() in browser.py",
        "Return {url: page.url, title: page.title(), viewport: page.viewport_size}"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-001"],
      "passes": false
    },
    {
      "id": "BROWSER-007",
      "category": "browser",
      "description": "Implement Browser.screenshot() method",
      "steps": [
        "Implement screenshot(path) in browser.py",
        "Use page.screenshot(path=path)",
        "Return {path, size}"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-001"],
      "passes": false
    },
    {
      "id": "BROWSER-008",
      "category": "browser",
      "description": "Implement Browser.close() method",
      "steps": [
        "Implement close() in browser.py",
        "Close page, context, browser",
        "Stop playwright",
        "Return success dict"
      ],
      "files": ["src/programmatic_demo/actuators/browser.py"],
      "depends_on": ["BROWSER-001"],
      "passes": false
    },
    {
      "id": "BROWSER-CLI",
      "category": "browser",
      "description": "Create CLI browser subcommands",
      "steps": [
        "Create src/programmatic_demo/cli/browser.py",
        "Add typer app with launch, navigate, click, fill, wait, state, screenshot, close commands",
        "Wire to Browser singleton",
        "Output JSON responses",
        "Register in main.py"
      ],
      "files": ["src/programmatic_demo/cli/browser.py"],
      "depends_on": ["CLI-001", "BROWSER-001", "BROWSER-002", "BROWSER-003", "BROWSER-004", "BROWSER-005", "BROWSER-006", "BROWSER-007", "BROWSER-008"],
      "passes": false
    },

    {
      "id": "INT-001",
      "category": "integration",
      "description": "Test: terminal echo demo",
      "steps": [
        "Start recording",
        "Launch terminal",
        "Type 'echo Hello'",
        "Press enter",
        "Wait for 'Hello' in output",
        "Stop recording",
        "Verify video file exists"
      ],
      "files": [],
      "depends_on": ["REC-CLI", "TERM-CLI", "KEY-CLI"],
      "passes": false
    },
    {
      "id": "INT-002",
      "category": "integration",
      "description": "Test: mouse movement smooth",
      "steps": [
        "Start recording",
        "Move mouse 0,0 to 500,500",
        "Verify duration ~0.5s",
        "Stop recording",
        "Visually verify smooth curve"
      ],
      "files": [],
      "depends_on": ["REC-CLI", "MOUSE-CLI"],
      "passes": false
    },
    {
      "id": "INT-003",
      "category": "integration",
      "description": "Test: browser navigation",
      "steps": [
        "Start recording",
        "Launch browser to example.com",
        "Get observation",
        "Verify OCR contains 'Example Domain'",
        "Close browser",
        "Stop recording"
      ],
      "files": [],
      "depends_on": ["REC-CLI", "BROWSER-CLI", "STATE-CLI"],
      "passes": false
    },
    {
      "id": "INT-004",
      "category": "integration",
      "description": "Test: full observation accuracy",
      "steps": [
        "Launch terminal",
        "Type known text",
        "Run observe full",
        "Verify screenshot exists",
        "Verify ocr_text contains typed text",
        "Verify terminal_output matches",
        "Verify window info present"
      ],
      "files": [],
      "depends_on": ["TERM-CLI", "KEY-CLI", "STATE-CLI"],
      "passes": false
    }
  ],
  "metadata": {
    "total_features": 72,
    "categories": {
      "setup": 5,
      "utility": 3,
      "cli": 1,
      "recording": 5,
      "terminal": 8,
      "keyboard": 5,
      "mouse": 7,
      "perception": 12,
      "window": 3,
      "browser": 10,
      "integration": 4
    },
    "parallelization_guide": {
      "description": "Features with same depends_on can run in parallel",
      "examples": [
        "SETUP-002, SETUP-003, SETUP-004, SETUP-005 can run in parallel (all depend on SETUP-001 or nothing)",
        "UTIL-001, UTIL-002, UTIL-003 can run in parallel",
        "REC-001, REC-002, REC-003 can run in parallel (all depend on REC-SKEL)",
        "TERM-001, TERM-002, TERM-004, TERM-006 can run in parallel (all depend only on TERM-SKEL)",
        "KEY-002, KEY-003 can run in parallel",
        "MOUSE-001, MOUSE-002, MOUSE-004 can run in parallel",
        "SCREEN-001, SCREEN-002, SCREEN-003, SCREEN-004 can run in parallel",
        "OCR-001, OCR-002 can run in parallel",
        "BROWSER-002 through BROWSER-008 can run in parallel (all depend on BROWSER-001)"
      ]
    }
  }
}
